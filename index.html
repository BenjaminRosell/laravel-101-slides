<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Laravel 101</title>

		<meta name="description" content="An introduction to the Laravel framework, for the Winnipeg PHP Meetup group">
		<meta name="author" content="Colin Viebrock">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/laravel101.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">
			<div class="slides">


<section data-background="#f4726d" class="bg-inverse">
	<h1>Laravel 101</h1>
	<p>
		Winnipeg PHP Meetup - March 26, 2014
	</p>
</section>


<section>
	<h2>Colin Viebrock</h2>
	<ul>
		<li class="fragment roll-in">Freelance Web Developer/Designer
			<em class="aside">front and back-end</em>
		</li>
		<li class="fragment roll-in">Involved in PHP since 1997
			<em class="aside">with a few years off for good behaviour</em>
		</li>
		<li class="fragment roll-in">Previous founder of
			<a href="//greengarage.ca">Green Garage</a>,
			<a href="//prestoh.com/">Prestoh</a> &amp;
			<a href="//easydns.com/">easyDNS</a>
		</li>
		<li class="fragment roll-in"><img src="/img/opensource.svg" class="inline no-shadow" height="184">
			<img src="/img/php.svg" class="inline no-shadow" height="184">
			<img src="/img/logos.png" class="inline no-shadow" height="184" width="376">
		</li>
		<li class="fragment roll-in">@cviebrock at
			<a href="//github.com/cviebrock"> Github</a> and
			<a href="//twitter.com/cviebrock"> Twitter</a>
			<span class="handwriting fragment">&hellip; also on <a href="//ca.linkedin.com/in/colinviebrock/"> LinkedIn</a></span>
		</li>
	</ul>
</section>


<section data-background="#f4726d" class="bg-inverse">
	<h1>Laravel</h1>
	<p class="fragment">
		A free, open source, MVC web-application framework.
	</p>
	<p class="fragment">
		<a href="//getcomposer.org"><i class="fa fa-fw fa-cloud-download"></i> laravel.com</a>
	</p>
</section>


<section>
	<h2>Prerequisites</h2>
	<ul>
		<li class="fragment roll-in">PHP 5.4.x
			<em class="aside">was 5.3.7, but get with the times, folks!</em>
		</li>
		<li class="fragment roll-in">Mcrypt extension
		</li>
		<li class="fragment roll-in">JSON extension
			<em class="aside">Not included by default in some PHP 5.5 distributions</em>
		</li>
		<li class="fragment roll-in">Composer
			<em class="aside">
				<a href="//getcomposer.org"><i class="fa fa-cloud-download"></i> getcomposer.org</a>
				and install it globally!
			</em>
		</li>
</section>


<section>
	<h2>Starting a New Project</h2>
	<div class="fragment-block">
		<div class="fragment hide-after">
			<h3>Easiest</h3>
			<pre>
<code contenteditable data-trim class="bash">
composer create-project laravel/laravel my-project --prefer-dist
</code>
			</pre>
		</div>

		<div class="fragment hide-after">
			<h3>Somewhat Easy</h3>
			<pre>
<code contenteditable data-trim class="bash">
git clone git@github.com:laravel/laravel.git my-project
cd my-project
composer install
			</code
			></pre>
		</div>

		<div class="fragment">
			<h3>Hrm...</h3>
			<pre>
<code contenteditable data-trim class="bash">
curl -L -O https://github.com/laravel/laravel/archive/master.zip
unzip master.zip
mv laravel-master my-project
cd my-project
composer install
</code>
			</pre>
		</div>

		<div class="fragment bookcover skewed spin-in" >
			<img src="/img/wat.jpg">
		</div>
	</div>

</section>


<section data-background="#706da7" class="bg-inverse" data-transition="zoom">
	<h2 class="no-border"><i class="fa fa-exclamation-triangle fa-lg fa-fw"></i> Git it under control</h2>
	<div class="handwriting fragment" style="left: 10em; top: 4em;">
		I see what you did.
	</div>
</section>


<section>
	<h2>Project Structure</h2>
	<ul class="folders">
		<li>app
			<span class="handwriting fragment inline padded highlight-active">&lt; your stuff</span>
		</li>
		<li>bootstrap
			<span class="handwriting fragment inline padded highlight-active">&lt;  startup stuff</span>
		</li>
		<li>public
			<span class="handwriting fragment inline padded highlight-active">&lt; static stuff: img, js, css, etc.</span>
		</li>
		<li class="file">composer.json
			<span class="handwriting fragment inline padded highlight-active">&lt; other people's stuff you want</span>
		</li>
		<li>vendor
			<span class="handwriting fragment inline padded highlight-active">&lt; other people's stuff</span>
		</li>
	</ul>
</section>


<section>
	<h2>Project Structure</h2>
	<ul class="folders">
		<li>app
			<ul>
				<li>commands</li>
				<li>config</li>
				<li class="fragment highlight-blue" data-fragment-index="1">controllers</li>
				<li>database</li>
				<li>lang</li>
				<li class="fragment highlight-blue" data-fragment-index="1">models</li>
				<li>start</li>
				<li>storage</li>
				<li>tests</li>
				<li class="fragment highlight-blue" data-fragment-index="1">views</li>
				<li class="file">filters.php</li>
				<li class="file fragment highlight-blue" data-fragment-index="1">routes.php</li>
			</ul>
		</li>
	</ul>
</section>


<section data-background="#46b87c" class="bg-inverse" data-transition="zoom">
	<h2 class="no-border"><i class="fa fa-wrench fa-lg fa-fw"></i> Our First App</h2>
	<div class="fragment bookcover skewed spin-in">
		<img src="/img/basicfun.jpg">
	</div>
</section>


<section>
	<h2>Basic Routing</h2>
		<pre>
<code contenteditable data-trim class="php" data-filename="app/routes.php">
Route::get('/', function() {
echo 'Hello World!';
});
</code>
		</pre>
</section>


<section data-background="#706da7" class="bg-inverse">
	<h2 class="no-border"><i class="fa fa-thumbs-up fa-lg fa-fw"></i>  Built-in Server</h2>
		<pre>
<code contenteditable data-trim class="bash">
php artisan serve --port 8000
</code>
		</pre>
</section>


<section>
	<h2>Route Parameters</h2>
	<div class="fragment-block">
		<pre class="fragment">
<code contenteditable data-trim class="php" data-filename="app/routes.php">
// pass parameters via URI

Route::get('/hello/{name}', function($name)
{
	return 'Hello, ' . $name;
});
</code>
		</pre>
		<pre class="fragment">
<code contenteditable data-trim class="php" data-filename="app/routes.php">
// escape output for safety

Route::get('/hello/{name}', function($name)
{
	return 'Hello, ' . e($name);
});
</code>
		</pre>
		<pre class="fragment">
<code contenteditable data-trim class="php" data-filename="app/routes.php">
// filter the URI data

Route::get('/hello/{name}', function($name)
{
	return 'Hello, ' . e($name);
})->where('name','[A-za-z]+');
</code>
		</pre>
		<pre class="fragment">
<code contenteditable data-trim class="php" data-filename="app/routes.php">
// make the param optional

Route::get('/hello/{name?}', function($name='stranger')
{
	return 'Hello, ' . e($name);
})->where('name','[A-za-z]+');
</code>
		</pre>
	</div>
</section>


<section>
	<h2>Controller Routing</h2>
	<pre>
<code contenteditable data-trim class="php" data-filename="app/routes.php">
Route::get('hello/{name?}', 'HelloController@showWelcome');
</code>
	</pre>
	<pre>
<code contenteditable data-trim class="php" data-filename="app/controllers/HelloController.php">
class HelloController extends BaseController {

	public function showWelcome($name='stranger')
	{
		return 'Hello, '. e($name) . '!';
	}

}
</code>
	</pre>
</section>


<section>
	<h2>RESTful Controllers</h2>
	<pre>
<code contenteditable data-trim class="php" data-filename="app/routes.php">
Route::controller('users', 'UsersController');
</code>
	</pre>
	<pre>
<code contenteditable data-trim class="php" data-filename="app/controllers/UsersController.php">
class UsersController extends BaseController {

	public function getIndex() {
			// GET http://domain.com/users
	}

	public function postProfile() {
			// POST http://domain.com/users/profile
	}

}
</code>
	</pre>
</section>


<section>
	<h2>Passing Data to Views</h2>
	<div class="fragment-block">
		<pre class="fragment">
<code contenteditable data-trim class="php" data-filename="app/routes.php">
Route::get('/hello/{name}', function($name) {
	return View::make('hello', array('name'=>$name) );
});
</code>
		</pre>
		<pre class="fragment">
<code contenteditable data-trim class="php" data-filename="app/routes.php">
Route::get('/hello/{name}', function($name) {
	return View::make('hello', compact('name') );
});
			</code>
		</pre>
	</div>
	<div class="fragment-block">
		<pre class="fragment">
<code contenteditable data-trim class="html" data-filename="app/views/hello.php">
&lt;html&gt;
	&lt;body&gt;
		&lt;p&gt;Hello, &lt;?php echo e($name); ?&gt;!&lt;/p&gt;
	&lt;/body&gt;
&lt;/html&gt;
</code>
		</pre>
		<pre class="fragment">
<code contenteditable data-trim class="html" data-filename="app/views/hello.blade.php">
&lt;html&gt;
	&lt;body&gt;
		&lt;p&gt;Hello, {{{ $name }}}!&lt;/p&gt;
	&lt;/body&gt;
&lt;/html&gt;
</code>
		</pre>
	</div>
</section>


<section class="stack">

	<section>
		<h2>Blade Templates</h2>
		<pre>
<code contenteditable data-trim class="php" data-filename="app/views/VIEWNAME.blade.php">
&lt;html&gt;
	&lt;body&gt;
		// echo and escape output
		Hello {{ $name }}!  Hello {{{ $html }}}!
	&lt;/body&gt;
&lt;/html&gt;
</code>
	 </pre>
	</section>

	<section>
		<h2>If Statements</h2>
		<pre>
<code contenteditable data-trim class="php" data-filename="app/views/VIEWNAME.blade.php">
@if( $name=='Bob' )
	Good to see you, Bob!
@elseif( $name=='Mary' )
	Howya doing, Mary!
@else
	Hey, where did Bob go?
@endif

@unless( $signed_in )
	You are not signed in.
@endunless
</code>
	 </pre>
	</section>

	<section>
		<h2>Loops</h2>
		<pre>
<code contenteditable data-trim class="php" data-filename="app/views/VIEWNAME.blade.php">
@for ($i = 0; $i < 10; $i++)
	The current value is {{ $i }}
@endfor

@foreach ($users as $user)
	<p>This is user {{ $user->id }}</p>
@endforeach

@while (true)
	<p>Make it stop!</p>
@endwhile
</code>
		</pre>
	</section>

	<section>
		<h2>Layouts</h2>
		<pre>
<code contenteditable data-trim class="html" data-filename="app/views/layouts/master.blade.php">
&lt;html&gt;
	&lt;body&gt;
		@include('header')  {{- app/views/header.blade.php -}}

		@section('sidebar')
			This is the master sidebar.
		@show

		&lt;div class="container"&gt;
			@yield('content', 'Default content')
		&lt;/div&gt;
	&lt;/body&gt;
&lt;/html&gt;
</code>
		</pre>
		<pre>
<code contenteditable data-trim class="php" data-filename="app/views/VIEWNAME.blade.php">
@extends('layouts.master')

@section('sidebar')
	@parent
	<p>This is appended to the master sidebar.</p>
@stop

@section('content')
	<p>This is my body content.</p>
@stop
</code>
		</pre>
	</section>

</section>


<section data-background="#706da7" class="bg-inverse">
	<h2 class="no-border"><i class="fa fa-archive fa-lg fa-fw"></i> Database &amp; Models</h2>
	<p>
		Out-of-the-box support for:
	</p>
	<ul>
		<li>MySQL</li>
		<li>Postgres</li>
		<li>SQLite</li>
		<li>SQL Server</li>
	</ul>
</section>


<section class="stack">

	<section>
		<h2>Secret Environment Variables</h2>
		<pre>
<code contenteditable data-trim class="php" data-filename=".env.php">
return array(
	'MYSQL_USER' => 'dbuser',
	'MYSQL_PASS' => 'super-secret-sauce',
);
</code>
		</pre>
	</section>

	<section>
		<h2>Configuration</h2>
		<pre>
<code contenteditable data-trim class="php" data-filename="app/config/database.php">
return array(
	'default' => 'mysql',

'connections' => array(
		'mysql' => array(
			'driver'    => 'mysql',
			'host'      => 'localhost',
			'database'  => 'my-project',
			'username'  => $_ENV['MYSQL_USER'],
			'password'  => $_ENV['MYSQL_PASS'],
			'charset'   => 'utf8',
			'collation' => 'utf8_unicode_ci',
			'prefix'    => '',
		),
	...
</code>
		</pre>
	</section>

</section>


<section class="stack">

	<section>
		<h2>Migrations</h2>
		<pre>
<code contenteditable data-trim class="bash">
php artisan migrate:install

php artisan migrate:make create_posts_table
</code>
		</pre>
	</section>

	<section>
		<pre>
<code contenteditable data-trim class="php" data-filename="app/database/migrations/2014_03_12_123456_create_posts_table.blade.php">
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Database\Migrations\Migration;

class CreatePostsTable extends Migration {

	/**
	 * Run the migrations.
	 *
	 * @return void
	 */
	public function up()
	{
		//
	}

	/**
	 * Reverse the migrations.
	 *
	 * @return void
	 */
	public function down()
	{
		//
	}

}
</code>
		</pre>
	</section>

	<section>
		<pre>
<code contenteditable data-trim class="php">
public function up()
{
	Schema::create('posts', function(Blueprint $table) {
		$table->increments('id');
		$table->string('title');
		$table->text('text')->nullable();
		$table->boolean('active')->default(true);
		$table->timestamps();
	});
}
</code>
<code contenteditable data-trim class="php">
public function down()
{
	Schema::drop('posts');
}
</code>
		</pre>
	</section>

	<section>
		<h2>Run Migrations</h2>
		<pre>
<code contenteditable data-trim class="bash">
php artisan migrate
</code>
		</pre>
		<div class="fragment">
			<h2>Ooops!</h2>
			<pre>
<code contenteditable data-trim class="bash">
php artisan migrate:rollback
</code>
			</pre>
		</div>
	</section>

</section>


<section data-background="/img/models2.jpg" data-background-transition="fade">
	<h2 class="bar">Models</h2>
</section>


<section>
	<h2>Eloquent</h2>
	<pre>
<code contenteditable data-trim class="php">
class Posts extends Eloquent {}
</code>
	</pre>
</section>


<section class="stack">
	<section>
		<h2>Create a New Model</h2>
		<pre>
<code contenteditable data-trim class="php">
$post = Post::create(
	array(
		'title'  => 'My First Post',
		'text'   => 'Lorem ipsum dolor sit amet, consectetur adipisicing elit',
		'active' => true,
	)
);
</code>
		</pre>
	</section>

	<section>
		<h2>Retrieving</h2>
		<pre>
<code contenteditable data-trim class="php">
$post = Post::find(1);
</code>
<code contenteditable data-trim class="php fragment">
$post = Post::findOrFail(1);
</code>
<code contenteditable data-trim class="php fragment">
$posts = Post::where('id','>',3)->get();
$post = Post::where('title','LIKE','laravel')->first();
</code>
<code contenteditable data-trim class="php fragment">
$posts = Post::all();
</code>
		</pre>
	</section>

	<section>
		<h2>Using</h2>
		<pre>
<code contenteditable data-trim class="php">
$post = Post::find(1);

echo $post->title;
echo $post->created_at;		// uses Carbon/Carbon for dates
</code>
<code contenteditable data-trim class="php fragment">
$posts = Post::all();

foreach( $posts as $post )
{
	echo $post->title;
}
</code>
		</pre>
	</section>

	<section>
		<h2>Deleting</h2>
		<pre>
<code contenteditable data-trim class="php">
$post = Post::find(1);
$post->delete();
</code>
<code contenteditable data-trim class="php fragment">
Post::destroy(1);
Post::destroy(1,2,3);
</code>
<code contenteditable data-trim class="php fragment">
$lastWeek = Carbon::now()->subWeek();
Post::where('created_at','<', $lastWeek)->delete();
</code>
		</pre>
	</section>

</section>


<section class="stack">
	<section>
		<h2>Accessors</h2>
		<pre>
<code contenteditable data-trim class="php">
class Post extends Eloquent {

    public function getTitleAttribute($value)
    {
        return ucwords($value);
    }

}
</code>
<code contenteditable data-trim class="php fragment">
$post = Post::create(array(
	'title' => 'my first post'
));

echo $post->title;		// "My First Post"
</code>
		</pre>
	</section>

</section>


<section>
	<h1>THE END</h1>
</section>






			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				width: 1440,
				height: 1000,
				margin: 0.15,

				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.pack.js', async: true, callback: function() {
						hljs.configure({ tabReplace: '    ' });
						hljs.initHighlightingOnLoad();
					} },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>
	</body>
</html>
